{% extends "libs/base.html" %}
{% load static %}
{% block container %}
<button class="am-btn" id="checkjsapi">check</button>
{% endblock %}
{% block script %}
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="javascript" />
<script>
var data = $.parseJSON('{{wx_pay_params}}');
wx.config({
    debug : true,
    appId : data['appid'],
    timestamp : data['timestamp'],
    nonceStr : data['noncestr'],
    signature : data['signature'],
    jsApiList:['chooseWXPay']
});
wx.ready(function(){
    $('#checkjsapi').on('click',function(){
        wx.checkJsApi({
            jsApiList:[
                'getNetworkType',
                'previewImage'
            ],
            success:function(){
                alert($.parseJSON(res));
            }
        })
    });
});
</script>
{% endblock %}