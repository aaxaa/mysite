{% extends "libs/base.html" %}
{% load static %}
{% block container %}
<button class="am-btn am-btn-primary" id="checkjsapi">check</button>
{% endblock %}
{% block script %}
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="javascript"></script>
<script>
wx.config({
    debug : true,
    appId : '{{appid}}',
    timestamp : '{{timestamp}}',
    nonceStr : '{{noncestr}}',
    signature : '{{signature}}',
    jsApiList:['chooseWXPay']
});
wx.ready(function(){
    alert('ready');
    $('#checkjsapi').on('click',function(){
        alert('on_click');
        wx.checkJsApi({
            jsApiList:[
                'getNetworkType',
                'previewImage'
            ],
            success:function(){
                alert($.parseJSON(res));
            }
        })
    });
});
wx.error(function(res){
    alert($.parseJSON(res));
});
</script>
{% endblock %}